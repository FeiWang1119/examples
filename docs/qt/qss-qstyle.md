# Custom style 

You have two choices when it comes to giving a custom style to your Qt widgets.  
Qt Style Sheets are very convenient for getting started — just a few CSS-like rules, and they work.  
It is our experience, however, that Qt Style Sheets create too much trouble and a QStyle subclass (*) gives a better solution, in the long run.  
The following chart compares the two choices, to show you why a QStyle subclass trumps Qt Style Sheets:  

| Scenario                                                         | Qt Style Sheets                                                                                                                                                                                                                                                                                                                                                                 | QStyle                                                                                                                                                                                                                                                                |
| ---------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Calling setFont/setPalette                                       | No effect (rather unexpected), even if the style sheet has nothing to do with colors                                                                                                                                                                                                                                                                                            | Works as usual                                                                                                                                                                                                                                                        |
| Changing the system colors                                       | No effect — the styled widgets don’t adapt to the new colors, even if the stylesheet has nothing to do with colors                                                                                                                                                                                                                                                              | Works as usual — the widgets use the new colors via the updated QPalette                                                                                                                                                                                              |
| Achieving 100% of the styling requirements                       | Style sheets allow you to do a number of things, but not everything. If there’s no support for a specific customization, there’s no solution.                                                                                                                                                                                                                                   | QStyle subclasses in C++ give full control, as long as the widget actually delegates to the style. (Note that style sheets are implemented as an internal QStyle subclass. So, by definition, the flexibility given by custom QStyle subclasses is greater or equal.) |
| Mixing custom styling with native styling                        | Stylesheets do not mix well with QProxyStyles or other QStyle subclasses. This makes it even harder to gradually move away from the stylesheet solution. One specific example for proof: a stylesheet that simply sets a background color will lead to many of the style’s methods not being called because the style sheet style does many things on its own (ex: CT_SpinBox). | QProxyStyle allows you to tweak just one aspect and leave the rest to the native style for the platform.                                                                                                                                                              |
| Making a specific window unstyled (e.g.,file dialog)             | Very complicated (impacts all CSS rules)                                                                                                                                                                                                                                                                                                                                        | Simply call QWidget::setStyle on other windows and not on that one.                                                                                                                                                                                                   |
| Scaling for complex needs                                        | Actual management of the stylesheet data does not scale (no include mechanism, etc.), calling for super-complicated selectors.                                                                                                                                                                                                                                                  | The C++ code of the QStyle subclass can call into helper classes, one per type of widget. This is the way KDAB develops widget styles these days, to avoid writing a 20000-line class.                                                                                |
| Reacting on changes                                              | Selectors on properties do not get reevaluated when the properties change, forcing hacks such as reset of a style sheet with the associated cost.                                                                                                                                                                                                                               | The setter calls update(); the paint event calls into the style again.                                                                                                                                                                                                |
| Performance considerations when styling many independent widgets | Each call to setStyleSheet triggers parsing, which can be slow if done too often (e.g., when creating 50 buttons, each one calling setStylesheet(“…”)). The usual solution is a single application-wide stylesheet, but that’s a pain to maintain and it hits the issue of management of the style sheet data, above.                                                           | No parsing necessary. Either all widgets use the application style, or individual widgets can point to a specific style.                                                                                                                                              |
| Performance considerations when reparenting a widget             | Each reparenting triggers clearing the stylesheet rules cache and recalculating everything.                                                                                                                                                                                                                                                                                     |                                                                                                                                                                                                                                            Reparenting has no performance impact with QStyle.                           |


(*) To be clear, when we say “a QStyle subclass,” we don’t mean you should subclass QStyle directly. Usually, you would start by subclassing QProxyStyle, so that all widgets still appear on the screen. Then you can style them incrementally and, when you’re done, you can switch to QCommonStyle as the base class, if the appearance should be the same on all platforms.

As you can see, we find that a QStyle subclass is overall a much better solution for styling widgets than is Qt Style Sheets. It’s a bit more difficult to write, but the mechanism is much more powerful and performant.
